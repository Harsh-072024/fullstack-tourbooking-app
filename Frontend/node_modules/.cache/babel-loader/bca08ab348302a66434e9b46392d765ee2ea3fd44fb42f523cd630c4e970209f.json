{"ast":null,"code":"import React,{useContext,useState}from'react';import'./booking.css';import{Form,FormGroup,ListGroup,ListGroupItem,Button}from'reactstrap';import{useNavigate}from'react-router-dom';import{AuthContext}from'../../context/AuthContext';import{BASE_URL}from'../../utils/config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Booking=_ref=>{let{tour,avgRating}=_ref;const{price,reviews,title}=tour;const navigate=useNavigate();const{user}=useContext(AuthContext);const[booking,setBooking]=useState({userId:user&&user._id,userEmail:user&&user.email,tourName:title,fullName:'',phone:'',guestSize:1,bookAt:''});const handleChange=e=>{setBooking(prev=>({...prev,[e.target.id]:e.target.value}));};const serviceFee=10;const totalAmount=Number(price)*Number(booking.guestSize)+Number(serviceFee);// send data to the server\nconst handleClick=async e=>{e.preventDefault();console.log(booking);try{if(!user||user===undefined||user===null){return alert('Please sign in');}const res=await fetch(`${BASE_URL}/booking`,{method:'post',headers:{'content-type':'application/json'},credentials:'include',body:JSON.stringify(booking)});const result=await res.json();if(!res.ok){return alert(result.message);}navigate(\"/thank-you\");}catch(err){alert(err.message);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"booking\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"booking__top d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",price,\" \",/*#__PURE__*/_jsx(\"span\",{children:\"/per person\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"tour__rating d-flex align-items-center \",children:[/*#__PURE__*/_jsx(\"i\",{class:\"ri-star-fill\"}),avgRating===0?null:avgRating,\" (\",reviews===null||reviews===void 0?void 0:reviews.length,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking__form\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Information\"}),/*#__PURE__*/_jsxs(Form,{className:\"booking__info-form\",onSubmit:handleClick,children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full Name\",id:\"fullName\",required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"phone\",placeholder:\"phone\",id:\"phone\",required:true,onChange:handleChange})}),/*#__PURE__*/_jsxs(FormGroup,{className:\"d-flex align-items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"\",id:\"bookAt\",required:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Guest\",id:\"guestSize\",required:true,onChange:handleChange})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking__bottom\",children:[/*#__PURE__*/_jsxs(ListGroup,{children:[/*#__PURE__*/_jsxs(ListGroupItem,{className:\"border-0 px-0\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"d-flex align-items-center gap-1\",children:[\"$\",price,\" \",/*#__PURE__*/_jsx(\"i\",{class:\"ri-close-line\"}),\" 1 person\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\" $\",price]})]}),/*#__PURE__*/_jsxs(ListGroupItem,{className:\"border-0 px-0\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Service charge\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" $\",serviceFee]})]}),/*#__PURE__*/_jsxs(ListGroupItem,{className:\"border-0 px-0 total\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\" $\",totalAmount]})]})]}),/*#__PURE__*/_jsx(Button,{className:\"btn primary__btn w-100 mt-4\",onClick:handleClick,children:\"Book Now\"})]})]});};export default Booking;","map":{"version":3,"names":["React","useContext","useState","Form","FormGroup","ListGroup","ListGroupItem","Button","useNavigate","AuthContext","BASE_URL","jsx","_jsx","jsxs","_jsxs","Booking","_ref","tour","avgRating","price","reviews","title","navigate","user","booking","setBooking","userId","_id","userEmail","email","tourName","fullName","phone","guestSize","bookAt","handleChange","e","prev","target","id","value","serviceFee","totalAmount","Number","handleClick","preventDefault","console","log","undefined","alert","res","fetch","method","headers","credentials","body","JSON","stringify","result","json","ok","message","err","className","children","class","length","onSubmit","type","placeholder","required","onChange","onClick"],"sources":["C:/Users/Asus/OneDrive/Desktop/Tour-full-stack-/Frontend/src/components/Booking/Booking.jsx"],"sourcesContent":["import React, {useContext, useState} from 'react'\r\nimport './booking.css'\r\nimport { Form, FormGroup, ListGroup, ListGroupItem, Button } from 'reactstrap'\r\n\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { BASE_URL } from '../../utils/config'\r\n\r\nconst Booking = ({tour, avgRating}) => {\r\n    const {price, reviews, title } = tour;\r\n    const navigate = useNavigate();\r\n\r\n    const {user} = useContext(AuthContext)\r\n\r\n    const [booking, setBooking] = useState({\r\n        userId: user && user._id,\r\n        userEmail: user && user.email,\r\n        tourName: title,\r\n        fullName:'',\r\n        phone:'',\r\n        guestSize:1,\r\n        bookAt:''\r\n\r\n    })\r\n\r\n    const handleChange = e => {\r\n        setBooking(prev => ({ ...prev, [e.target.id]: e.target.value }));\r\n    };\r\n\r\n    const serviceFee = 10\r\n    const totalAmount = Number(price) * Number(booking.guestSize) + Number(serviceFee)\r\n\r\n// send data to the server\r\n    const handleClick = async e => {\r\n        e.preventDefault();\r\n        console.log(booking);\r\n\r\n        try {\r\n            if(!user || user === undefined || user===null){\r\n                return alert('Please sign in')\r\n            }\r\n            const res = await fetch (`${BASE_URL}/booking`,{\r\n                method:'post',\r\n                headers:{\r\n                   'content-type':'application/json'\r\n                },\r\n                credentials:'include',\r\n                body:JSON.stringify(booking)\r\n            })\r\n\r\n            const result = await res.json()\r\n\r\n            if(!res.ok){\r\n                return alert(result.message)\r\n            }\r\n            navigate(\"/thank-you\")\r\n        } catch (err) {\r\n            alert(err.message)\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n  return (\r\n    <div className=\"booking\">\r\n        <div className=\"booking__top d-flex align-items-center justify-content-between\">\r\n            <h3>${price} <span>/per person</span></h3>\r\n            <span className=\"tour__rating d-flex align-items-center \">\r\n                <i class=\"ri-star-fill\" ></i>\r\n                 {avgRating === 0 ? null : avgRating} ({reviews?.length})\r\n                </span>\r\n        </div>\r\n\r\n        {/*   ========= booking form =========== */ }\r\n        <div className=\"booking__form\">\r\n            <h5>Information</h5>\r\n            <Form className=\"booking__info-form\" onSubmit={handleClick}>\r\n                <FormGroup>\r\n                    <input type=\"text\" placeholder='Full Name' id='fullName' required onChange={handleChange} />\r\n                </FormGroup>\r\n                <FormGroup>\r\n                    <input type=\"phone\" placeholder='phone' id='phone' required onChange={handleChange} />\r\n                </FormGroup>\r\n                <FormGroup className='d-flex align-items-center gap-3'>\r\n                    <input type=\"date\" placeholder='' id='bookAt' required onChange={handleChange} />\r\n                    <input type=\"number\" placeholder='Guest' id='guestSize' required onChange={handleChange} />\r\n                </FormGroup>\r\n            </Form>\r\n        </div>\r\n        {/*   ========= booking end =========== */ }\r\n\r\n        {/* ========= booking bottom ========= */}\r\n        <div className=\"booking__bottom\">\r\n            <ListGroup>\r\n                <ListGroupItem className='border-0 px-0'>\r\n                    <h5 className='d-flex align-items-center gap-1'>\r\n                        ${price} <i class=\"ri-close-line\"></i> 1 person \r\n                        </h5>\r\n                    <span> ${price}</span>\r\n                </ListGroupItem>\r\n                <ListGroupItem className='border-0 px-0'>\r\n                    <h5>Service charge</h5>\r\n                    <span> ${serviceFee}</span>\r\n                </ListGroupItem>\r\n                <ListGroupItem className='border-0 px-0 total'>\r\n                    <h5>Total</h5>\r\n                    <span> ${totalAmount}</span>\r\n                </ListGroupItem>\r\n            </ListGroup>\r\n\r\n            <Button className='btn primary__btn w-100 mt-4' onClick={handleClick}>Book Now</Button>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Booking"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}